{"version":3,"sources":["../node_modules/debounce/index.js","js/utils/get-ref.js","js/app.js","js/main.js"],"names":["getRef","sel","document","body","querySelector","isChrome","test","navigator","userAgent","vendor","App","speech","window","speechSynthesis","voices","dropdown","text","pitch","rate","form","init","setVoices","onTextChanged","addEventListener","e","onSubmit","update","setTimeout","speak","classList","add","search","location","options","voice","searchParams","Object","fromEntries","URLSearchParams","value","getVoices","innerHTML","reduce","str","name","prefill","preventDefault","updateURL","find","lang","utterance","SpeechSynthesisUtterance","cancel","volume","queryString","FormData","toString","history","replaceState","title"],"mappings":";AAcA,SAAA,EAAA,EAAA,EAAA,GACA,IAAA,EAAA,EAAA,EAAA,EAAA,EAGA,SAAA,IACA,IAAA,EAAA,KAAA,MAAA,EAEA,EAAA,GAAA,GAAA,EACA,EAAA,WAAA,EAAA,EAAA,IAEA,EAAA,KACA,IACA,EAAA,EAAA,MAAA,EAAA,GACA,EAAA,EAAA,OAXA,MAAA,IAAA,EAAA,KAgBA,IAAA,EAAA,WACA,EAAA,KACA,EAAA,UACA,EAAA,KAAA,MACA,IAAA,EAAA,IAAA,EAOA,OANA,IAAA,EAAA,WAAA,EAAA,IACA,IACA,EAAA,EAAA,MAAA,EAAA,GACA,EAAA,EAAA,MAGA,GAoBA,OAjBA,EAAA,MAAA,WACA,IACA,aAAA,GACA,EAAA,OAIA,EAAA,MAAA,WACA,IACA,EAAA,EAAA,MAAA,EAAA,GACA,EAAA,EAAA,KAEA,aAAA,GACA,EAAA,OAIA,EAIA,EAAA,SAAA,EAEA,OAAA,QAAA;;ACnEeA,aAAAA,OAAAA,eAAAA,QAAAA,aAAAA,CAAAA,OAAAA,IAAAA,QAAAA,aAAAA,EAFf,IAAMA,EAAS,SAAAC,GAAOC,OAAAA,SAASC,KAAKC,cAA2BH,aAAAA,OAAAA,EAA7C,OAEHD,EAAAA,EAAAA,QAAAA,QAAAA;;AC2GA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EA7Gf,IAAA,EAAA,EAAA,QAAA,aACA,EAAA,EAAA,QAAA,oBA4Ge,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAAA,SAAA,EAAA,EAAA,GAAA,IAAA,EAAA,OAAA,KAAA,GAAA,GAAA,OAAA,sBAAA,CAAA,IAAA,EAAA,OAAA,sBAAA,GAAA,IAAA,EAAA,EAAA,OAAA,SAAA,GAAA,OAAA,OAAA,yBAAA,EAAA,GAAA,cAAA,EAAA,KAAA,MAAA,EAAA,GAAA,OAAA,EAAA,SAAA,EAAA,GAAA,IAAA,IAAA,EAAA,EAAA,EAAA,UAAA,OAAA,IAAA,CAAA,IAAA,EAAA,MAAA,UAAA,GAAA,UAAA,GAAA,GAAA,EAAA,EAAA,EAAA,OAAA,IAAA,GAAA,QAAA,SAAA,GAAA,EAAA,EAAA,EAAA,EAAA,MAAA,OAAA,0BAAA,OAAA,iBAAA,EAAA,OAAA,0BAAA,IAAA,EAAA,OAAA,IAAA,QAAA,SAAA,GAAA,OAAA,eAAA,EAAA,EAAA,OAAA,yBAAA,EAAA,MAAA,OAAA,EAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,KAAA,EAAA,OAAA,eAAA,EAAA,EAAA,CAAA,MAAA,EAAA,YAAA,EAAA,cAAA,EAAA,UAAA,IAAA,EAAA,GAAA,EAAA,EAAA,SAAA,EAAA,EAAA,GAAA,KAAA,aAAA,GAAA,MAAA,IAAA,UAAA,qCAAA,SAAA,EAAA,EAAA,GAAA,IAAA,IAAA,EAAA,EAAA,EAAA,EAAA,OAAA,IAAA,CAAA,IAAA,EAAA,EAAA,GAAA,EAAA,WAAA,EAAA,aAAA,EAAA,EAAA,cAAA,EAAA,UAAA,IAAA,EAAA,UAAA,GAAA,OAAA,eAAA,EAAA,EAAA,IAAA,IAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,GAAA,EAAA,EAAA,UAAA,GAAA,GAAA,EAAA,EAAA,GAAA,EA1Gf,IAAMK,EAAW,SAASC,KAAKC,UAAUC,YAAc,aAAaF,KAAKC,UAAUE,QAE7EC,EAwGS,WAvGA,SAAA,IAAA,EAAA,KAAA,GACRC,KAAAA,OAASC,OAAOC,gBAChBC,KAAAA,OAAS,GAETC,KAAAA,UAAW,EAAO,EAAA,SAAA,UAClBC,KAAAA,MAAO,EAAO,EAAA,SAAA,QACdC,KAAAA,OAAQ,EAAO,EAAA,SAAA,SACfC,KAAAA,MAAO,EAAO,EAAA,SAAA,QACdC,KAAAA,MAAO,EAAO,EAAA,SAAA,QAEdC,KAAAA,OACAC,KAAAA,YAEAC,KAAAA,eAAgB,EAAS,EAAA,SAAA,KAAKA,cAAe,KA0FrC,OAAA,EAAA,EAAA,CAAA,CAAA,IAAA,OAvFP,MAAA,WAAA,IAAA,EAAA,KACDjB,GAMAM,KAAAA,OAAOY,iBAAiB,gBAAiB,WAAM,OAAA,EAAKF,cACpDF,KAAAA,KAAKI,iBAAiB,SAAU,SAAAC,GAAK,OAAA,EAAKC,SAASD,KAEnDR,KAAAA,KAAKO,iBAAiB,QAAS,WAAM,OAAA,EAAKD,kBAC1CP,KAAAA,SAASQ,iBAAiB,SAAU,WAAM,OAAA,EAAKG,WAC/CT,KAAAA,MAAMM,iBAAiB,SAAU,WAAM,OAAA,EAAKG,WAC5CR,KAAAA,KAAKK,iBAAiB,SAAU,WAAM,OAAA,EAAKG,WAEhDC,WAAW,WAAM,OAAA,EAAKC,SAAS,OAbvB,EAAA,EAAA,SAAA,OAAOC,UAAUC,IAAI,mBAqFhB,CAAA,IAAA,UArEJ,MAAA,WACwBlB,IAAbmB,EAAanB,OAAzBoB,SAAYD,OAEdE,EACF,EAAA,GAAA,CACFC,MAAO,iBACPhB,KAAM,EACND,MAAO,EACPD,KAAM,qCAEJmB,GARiBC,OAAOC,YAAY,IAAIC,gBAAgBP,KAWvDhB,KAAAA,SAASwB,MAAQN,EAAQC,MACzBlB,KAAAA,KAAKuB,MAAQN,EAAQjB,KACrBC,KAAAA,MAAMsB,MAAQN,EAAQhB,MACtBC,KAAAA,KAAKqB,MAAQN,EAAQf,OAqDb,CAAA,IAAA,YAlDF,MAAA,WACNJ,KAAAA,OAAS,KAAKH,OAAO6B,YAErBzB,KAAAA,SAAS0B,UAAY,KAAK3B,OAAO4B,OAAO,SAACC,EAAD,GAAQC,IAAAA,EAAAA,EAAAA,KAClDD,MAAAA,WAAAA,OAAAA,EACeC,2BAAAA,OAAAA,EAASA,MAAAA,OAAAA,EAFkB,oBAG1C,IAEEC,KAAAA,YA0CQ,CAAA,IAAA,WAvCLrB,MAAAA,SAAAA,GACRA,EAAEsB,iBAEGpB,KAAAA,WAoCQ,CAAA,IAAA,gBAjCE,MAAA,WACVA,KAAAA,WAgCQ,CAAA,IAAA,SA7BL,MAAA,WACHE,KAAAA,QACAmB,KAAAA,cA2BQ,CAAA,IAAA,QAxBN,MAAA,WAAA,IAAA,EAAA,KACDb,EAAQ,KAAKpB,OAAOkC,KAAK,SAAA,GAAcJ,OAAXA,EAAAA,OAAoB,EAAK7B,SAASwB,QAC5DU,EAASf,EAATe,KACFC,EAAY,IAAIC,yBAEjBxC,KAAAA,OAAOyC,SAEZF,EAAUhB,MAAQA,EAClBgB,EAAUD,KAAOA,EACjBC,EAAUlC,KAAO,KAAKA,KAAKuB,MAC3BW,EAAUhC,KAAO,KAAKA,KAAKqB,MAC3BW,EAAUjC,MAAQ,KAAKA,MAAMsB,MAC7BW,EAAUG,OAAS,EAEd1C,KAAAA,OAAOiB,MAAMsB,KAUL,CAAA,IAAA,YAPF,MAAA,WACLI,IAAAA,EAAc,IAAIhB,gBAAgB,IAAIiB,SAAS,KAAKpC,OAAOqC,WAEjEC,QAAQC,aAAa,KAAMxD,SAASyD,MAAWL,IAAAA,OAAAA,QAIlC,EAAA,GAAA,EAAA,IAAI5C,EAAJ,QAAA,QAAA;;AC7Gf,aAAA,QAAA","file":"main.ab311e0a.js","sourceRoot":"..\\src","sourcesContent":["/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing. The function also has a property 'clear' \n * that is a function which will clear the timer to prevent previously scheduled executions. \n *\n * @source underscore.js\n * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/\n * @param {Function} function to wrap\n * @param {Number} timeout in ms (`100`)\n * @param {Boolean} whether to execute at the beginning (`false`)\n * @api public\n */\nfunction debounce(func, wait, immediate){\n  var timeout, args, context, timestamp, result;\n  if (null == wait) wait = 100;\n\n  function later() {\n    var last = Date.now() - timestamp;\n\n    if (last < wait && last >= 0) {\n      timeout = setTimeout(later, wait - last);\n    } else {\n      timeout = null;\n      if (!immediate) {\n        result = func.apply(context, args);\n        context = args = null;\n      }\n    }\n  };\n\n  var debounced = function(){\n    context = this;\n    args = arguments;\n    timestamp = Date.now();\n    var callNow = immediate && !timeout;\n    if (!timeout) timeout = setTimeout(later, wait);\n    if (callNow) {\n      result = func.apply(context, args);\n      context = args = null;\n    }\n\n    return result;\n  };\n\n  debounced.clear = function() {\n    if (timeout) {\n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n  \n  debounced.flush = function() {\n    if (timeout) {\n      result = func.apply(context, args);\n      context = args = null;\n      \n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n\n  return debounced;\n};\n\n// Adds compatibility for ES modules\ndebounce.debounce = debounce;\n\nmodule.exports = debounce;\n","const getRef = sel => document.body.querySelector(`[data-ref=${sel}]`);\r\n\r\nexport default getRef;\r\n","import debounce from 'debounce';\r\nimport getRef from './utils/get-ref';\r\n\r\nconst isChrome = /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);\r\n\r\nclass App {\r\n\tconstructor() {\r\n\t\tthis.speech = window.speechSynthesis;\r\n\t\tthis.voices = [];\r\n\r\n\t\tthis.dropdown = getRef('voices');\r\n\t\tthis.text = getRef('text');\r\n\t\tthis.pitch = getRef('pitch');\r\n\t\tthis.rate = getRef('rate');\r\n\t\tthis.form = getRef('form');\r\n\r\n\t\tthis.init();\r\n\t\tthis.setVoices();\r\n\r\n\t\tthis.onTextChanged = debounce(this.onTextChanged, 250);\r\n\t}\r\n\r\n\tinit() {\r\n\t\tif (!isChrome) {\r\n\t\t\tgetRef('app').classList.add('is-not-chrome');\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.speech.addEventListener('voiceschanged', () => this.setVoices());\r\n\t\tthis.form.addEventListener('submit', e => this.onSubmit(e));\r\n\r\n\t\tthis.text.addEventListener('input', () => this.onTextChanged());\r\n\t\tthis.dropdown.addEventListener('change', () => this.update());\r\n\t\tthis.pitch.addEventListener('change', () => this.update());\r\n\t\tthis.rate.addEventListener('change', () => this.update());\r\n\r\n\t\tsetTimeout(() => this.speak(), 500);\r\n\t}\r\n\r\n\tprefill() {\r\n\t\tconst { location: { search } } = window;\r\n\t\tconst searchParams = Object.fromEntries(new URLSearchParams(search));\r\n\t\tconst options = {\r\n\t\t\t...{\r\n\t\t\t\tvoice: 'Google espaÃ±ol',\r\n\t\t\t\trate: 1,\r\n\t\t\t\tpitch: 1,\r\n\t\t\t\ttext: 'Ik wil graag een bier, por favour',\r\n\t\t\t},\r\n\t\t\t...searchParams,\r\n\t\t};\r\n\r\n\t\tthis.dropdown.value = options.voice;\r\n\t\tthis.text.value = options.text;\r\n\t\tthis.pitch.value = options.pitch;\r\n\t\tthis.rate.value = options.rate;\r\n\t}\r\n\r\n\tsetVoices() {\r\n\t\tthis.voices = this.speech.getVoices();\r\n\r\n\t\tthis.dropdown.innerHTML = this.voices.reduce((str, { name }) => `\r\n\t\t\t${str}\r\n\t\t\t<option value=\"${name}\">${name}</option>\r\n\t\t`, '');\r\n\r\n\t\tthis.prefill();\r\n\t}\r\n\r\n\tonSubmit(e) {\r\n\t\te.preventDefault();\r\n\r\n\t\tthis.update();\r\n\t}\r\n\r\n\tonTextChanged() {\r\n\t\tthis.update();\r\n\t}\r\n\r\n\tupdate() {\r\n\t\tthis.speak();\r\n\t\tthis.updateURL();\r\n\t}\r\n\r\n\tspeak() {\r\n\t\tconst voice = this.voices.find(({ name }) => name === this.dropdown.value);\r\n\t\tconst { lang } = voice;\r\n\t\tconst utterance = new SpeechSynthesisUtterance();\r\n\r\n\t\tthis.speech.cancel();\r\n\r\n\t\tutterance.voice = voice;\r\n\t\tutterance.lang = lang;\r\n\t\tutterance.text = this.text.value;\r\n\t\tutterance.rate = this.rate.value;\r\n\t\tutterance.pitch = this.pitch.value;\r\n\t\tutterance.volume = 2;\r\n\r\n\t\tthis.speech.speak(utterance);\r\n\t}\r\n\r\n\tupdateURL() {\r\n\t\tconst queryString = new URLSearchParams(new FormData(this.form)).toString();\r\n\r\n\t\thistory.replaceState(null, document.title, `?${queryString}`);\r\n\t}\r\n}\r\n\r\nexport default new App();\r\n","import './app.js';\r\n"]}